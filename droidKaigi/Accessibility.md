# できる！アクセシビリティ向上

おねむです

## 知るぞ

- アクセシビリティとは？

  - あるユーザーに取って使えるか？
  - 様々な能力を持つ最も幅広い層
  - 範囲を限定する「ユーザビリティ」とは異なる

- アクセシビリティでできること

  - 視覚
    - どういう人？
      - 全盲
      - 弱視・白内障・感覚過敏
      - 直射日光の環境下/真っ暗な環境下で使わないといけない人
    - 何ができる？
      - Talkback で視覚情報無しで動かせる
      - ダークモード
      - コントラスト
  - 聴覚
    - どういう人？
      - 聞こえない
      - 母国語ではない
      - 周りがうるさい
    - 何ができる？
      - 視覚で補う
  - モビリティ
    - どういう人？
      - 怪我をしている
      - 高齢
      - 手がふさがっている
    - 何ができる？
      - スイッチアクセスを搭載して画面タップをっ不要にする
      - タップ範囲の拡大、ピンチ操作の代替

- Talkback

  - Android 搭載のスクリーンリーダー
  - 使い方
    - 設定画面で ON にする
    - ショートカット OR adb コマンドで切り替える
    - 読み上げ
      - フォーカスされた要素を読み上げる
      - タップした要素を読み上げる
    - 操作
      - 左右にスワイプすることで、次の画面要素にフォーカス移動
      - ダブルタップして画面遷移
      - 2 本指操作をすることでジェスチャー操作
  - 「音声出力の表示を ON にする」と PR っ発効時便利

- スイッチアクセス
  - 足や指で操作できるスイッチをデバイスに接続する
    - デバイスを持っていなくても音量の大小を割り当てできるよ！
  - スクロール
    - 「次へ」を押し続けると矢印が出てくる。ここで「選択」するとスクロールする。

## 取り組んだ

- 日経電子版での取り組み
  - 施策立案
    - Talkback
    - スイッチアクセス
    - 文字サイズ最大でもくずれない
    - ダークモード
  - 優先度決め
    - 他の開発の合間に進めやすいか？
    - Android 標準のほかの機能ではダメか？
    - 上記を考慮し、Talkback・スイッチアクセスに対応
  - タスク内での優先度
    - 初回動線や PV が多い画面は優先！
    - 使えるかどうかを検討
  - 開発
    - 修正内容が視覚的にわかるよう PR に変更前後の画像・動画を添付
  - 分かったこと
    - 企画立案フェーズでは実際に動作を動画で見せたほうがよかった
    - 思ったよりハードルが低かった！
      - 結構デグレしにくい！
      - 多くの画面を見ることになるのでオンボーリングに
      - 見積もりは段階的に行うべきだった
        - 全部の見積もりは制度が落ちる

## できる

- ユーザー補助検証ツールを導入する
  - コントラストが低いよー！
  - フォントサイズを変えると画面が崩れるよ！
- ContentDescription を見直そう！
  - UI に表示している文字列をそのまま読ませるのではなく、読み上げに適した形にしよう
  - Compose からはこれを入れないとビルドできない
  - また、これが null だとそもそもフォーカスが当たってくれない
  - 画像の説明がテキストで書かれているなら、画像の方は null でいい
  - 空文字だと「ラベル無し」。
    - 分かりづらいので null にした方がいい
  - 場合によってはローカライズも必要
    - 英語のみとなっていないか？
  - 指定された文字列は適切か？
    - 社内用語やファイル名になっていないか？
- 手動テストをしよう！
  - 実際に動かさないとわからない挙動もある
  - 日本語で書かれた HTML を WebView で表示したら中国語が聞こえる
    - HTML の言語設定が en になっていた
  - 表示したつもりがないパーツも読み上げられてしまう
    - VISIBLITY を弄らなかった親パーツにフォーカスが...
    - 親パーツも可視性を操作
  - オーバーレイされた画面が読み上げられてしまう
    - 見えない UI の読み上げ属性が true になっていた
